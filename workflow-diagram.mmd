flowchart TD
    %% Lead Entry Points
    A[HubSpot Lead<br/>Created] --> B[Lead Qualifier Agent<br/>< 5 minute response]
    A1[Direct WhatsApp<br/>Contact] --> B
    
    %% Initial Qualification
    B --> C{Lead<br/>Qualified?}
    C -->|Yes| D[Tour Scheduling Agent<br/>Calendar Integration]
    C -->|Partial| E[Pre-screening Agent<br/>Information Collection]
    C -->|No| F[Lead Warming Agent<br/>24-48 hour sequence]
    
    %% Tour Scheduling Path
    D --> G{Tour<br/>Booked?}
    G -->|Yes| H[Calendar Event Created<br/>Leasing Agent Notified]
    G -->|No| I[Follow-up Sequence<br/>Alternative Options]
    
    %% Pre-screening Path
    E --> J{Information<br/>Complete?}
    J -->|Yes| D
    J -->|No| K[Continued Engagement<br/>Progressive Profiling]
    
    %% Warming Path
    F --> L{Response<br/>Received?}
    L -->|Yes| B
    L -->|No after 14 days| M[Mark Closed Lost<br/>End Sequence]
    
    %% Tour Execution
    H --> N[Pre-tour Confirmation<br/>24hr & 2hr reminders]
    N --> O[Tour Conducted<br/>by Leasing Agent]
    O --> P[Follow-up Agent<br/>24hr post-tour]
    
    %% Post-tour Path
    P --> Q{Customer<br/>Response?}
    Q -->|Positive| R[Application Process<br/>Human Agent Handoff]
    Q -->|Negative| S[Objection Handling<br/>Alternative Options]
    Q -->|No Response| T[Gentle Nudge<br/>3-day follow-up]
    
    %% Escalation Path
    B --> U{Escalation<br/>Needed?}
    D --> U
    E --> U
    F --> U
    P --> U
    U -->|Yes| V[Escalation Agent<br/>Human Handoff with Context]
    
    %% HubSpot Integration
    B --> W[Real-time HubSpot Sync<br/>Status: Contacted]
    D --> X[Real-time HubSpot Sync<br/>Status: Tour Scheduled]
    R --> Y[Real-time HubSpot Sync<br/>Status: Application Started]
    M --> Z[Real-time HubSpot Sync<br/>Status: Closed Lost]
    
    %% Feedback Loop
    I --> K
    S --> K
    T --> AA[Extended Nurturing<br/>Quarterly Check-in]
    
    %% Styling
    classDef startEnd fill:#90EE90,stroke:#006400,stroke-width:2px
    classDef agent fill:#87CEEB,stroke:#4682B4,stroke-width:2px
    classDef decision fill:#FFE4B5,stroke:#FF8C00,stroke-width:2px
    classDef hubspot fill:#E6E6FA,stroke:#8A2BE2,stroke-width:2px
    classDef escalation fill:#FFB6C1,stroke:#DC143C,stroke-width:2px
    classDef human fill:#DDA0DD,stroke:#9370DB,stroke-width:2px
    
    class A,A1 startEnd
    class B,D,E,F,P agent
    class C,G,J,L,Q,U decision
    class W,X,Y,Z hubspot
    class V escalation
    class O,R human